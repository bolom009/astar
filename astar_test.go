// Copyright 2013 Frederik Zipp. All rights reserved.
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.

package astar_test

import (
	"encoding/json"
	"reflect"
	"strconv"
	"strings"
	"testing"

	"github.com/bolom009/astar"
)

const (
	scaleFactor        = 1e6
	hashRnd            = 1099511628211
	hashDefault uint64 = 14695981039346656037
)

type Vector2 struct {
	X float32
	Y float32
}

type graph map[Vector2][]Vector2

func newGraph() graph {
	return make(map[Vector2][]Vector2)
}

// link creates a bi-directed edge between nodes a and b.
func (g graph) link(a, b Vector2) graph {
	g[a] = append(g[a], b)
	g[b] = append(g[b], a)
	return g
}

func (g graph) Neighbours(v Vector2) []Vector2 {
	return g[v]
}

func TestFindPath(t *testing.T) {
	p1 := Vector2{3, 1}
	p2 := Vector2{1, 2}
	p3 := Vector2{2, 4}
	p4 := Vector2{4, 5}
	p5 := Vector2{4, 3}
	p6 := Vector2{5, 1}
	p7 := Vector2{8, 4}
	p8 := Vector2{8, 3}
	p9 := Vector2{6, 3}

	tests := []struct {
		name  string
		graph graph
		start Vector2
		dest  Vector2
		want  []Vector2
	}{
		{
			name: "find simple path",
			graph: newGraph().
				link(p1, p2).link(p1, p3).
				link(p2, p3).link(p2, p4).
				link(p3, p4).link(p3, p5).
				link(p4, p6).link(p4, p7).
				link(p5, p7).link(p6, p9).
				link(p7, p8).link(p8, p9),
			start: p1,
			dest:  p4,
			want: []Vector2{
				Vector2{3, 1},
				Vector2{2, 4},
				Vector2{4, 5},
			},
		},
		{
			name: "find no path",
			graph: newGraph().
				link(p1, p2).link(p1, p3).
				link(p2, p3).link(p2, p4).
				link(p3, p4).link(p3, p5).
				link(p4, p6).link(p4, p7).
				link(p5, p7).link(p6, p9).
				link(p7, p8).link(p8, p9),
			start: p1,
			dest:  Vector2{1, 1},
			want:  nil,
		},
	}

	for _, tt := range tests {
		t.Run(tt.name, func(t *testing.T) {
			got := astar.FindPath[Vector2](tt.graph, tt.start, tt.dest, hasherVector2, heuristicEvaluation, heuristicEvaluation)
			if !reflect.DeepEqual(got, tt.want) {
				t.Errorf("\ngraph = %v\nFindPath(graph, %v, %v, nodeDist, nodeDist) = %v, want %v",
					tt.graph, tt.start, tt.dest, got, tt.want)
			}
		})
	}
}

// BenchmarkFindSmallPath-16    	 1000000	      1080 ns/op	    4648 B/op	       8 allocs/op
func BenchmarkFindSmallPath(b *testing.B) {
	aa := Vector2{2, 3}
	bb := Vector2{1, 7}
	cc := Vector2{1, 6}
	dd := Vector2{5, 6}

	graph := newGraph().link(aa, bb).link(aa, cc).link(bb, dd).link(cc, dd)

	b.ReportAllocs()
	b.ResetTimer()

	for i := 0; i < b.N; i++ {
		_ = astar.FindPath[Vector2](graph, aa, dd, hasherVector2, heuristicEvaluation, heuristicEvaluation)
	}
}

const jsonData = `{"{-1.48,1.03}":[{"x":5.19,"y":-1.75},{"x":-15.35,"y":-3.62},{"x":-12.46,"y":-0.74},{"x":-15.35,"y":-3.62},{"x":-11.42,"y":3.2},{"x":-12.46,"y":-0.74},{"x":-4.24,"y":7.69},{"x":-11.42,"y":3.2}],"{-1.48,14.35}":[{"x":-9.47,"y":14.17},{"x":-4.24,"y":7.69},{"x":-1.73,"y":19.3},{"x":-9.47,"y":14.17},{"x":-1.73,"y":19.3},{"x":5.19,"y":17.14}],"{-1.6,-115.41}":[{"x":7.57,"y":-99.5},{"x":7.49,"y":-122.43},{"x":4.96,"y":-126.8},{"x":7.49,"y":-122.43},{"x":-19.99,"y":-115.41},{"x":4.96,"y":-126.8}],"{-1.6,-83.58}":[{"x":6.86,"y":-75.46},{"x":-15.78,"y":-72.19},{"x":-15.78,"y":-72.19},{"x":-19.99,"y":-83.58},{"x":6.86,"y":-75.46},{"x":7.57,"y":-99.5}],"{-1.73,19.3}":[{"x":-9.47,"y":14.17},{"x":-1.48,"y":14.35},{"x":-1.48,"y":14.35},{"x":5.19,"y":17.14},{"x":4.06,"y":55.29},{"x":5.19,"y":17.14},{"x":-3.79,"y":55.01},{"x":4.06,"y":55.29},{"x":-3.79,"y":55.01},{"x":-7.82,"y":55.85},{"x":-7.82,"y":55.85},{"x":-26.53,"y":56.43}],"{-107.86,-272.31}":[{"x":-225.52,"y":-236.49},{"x":-114.67,"y":-294.01},{"x":-114.67,"y":-294.01},{"x":-92.91,"y":-300.61},{"x":-92.91,"y":-300.61},{"x":-86.1,"y":-278.94},{"x":-48.99,"y":-160.72},{"x":-86.1,"y":-278.94},{"x":-70.46,"y":-153.13},{"x":-48.99,"y":-160.72}],"{-11.42,3.2}":[{"x":-12.46,"y":-0.74},{"x":-1.48,"y":1.03},{"x":-4.24,"y":7.69},{"x":-1.48,"y":1.03},{"x":-12.46,"y":7.14},{"x":-4.24,"y":7.69}],"{-114.67,-294.01}":[{"x":-225.52,"y":-236.49},{"x":-232.33,"y":-258.17},{"x":-225.52,"y":-236.49},{"x":-107.86,"y":-272.31},{"x":-107.86,"y":-272.31},{"x":-92.91,"y":-300.61},{"x":-94.73,"y":-306.39},{"x":-92.91,"y":-300.61},{"x":-116.43,"y":-299.57},{"x":-94.73,"y":-306.39}],"{-116.43,-299.57}":[{"x":-114.67,"y":-294.01},{"x":-94.73,"y":-306.39}],"{-12.19,-184.28}":[{"x":-18.77,"y":-172.88},{"x":-34.54,"y":-200.19},{"x":-34.54,"y":-200.19},{"x":-21.36,"y":-200.19},{"x":-18.77,"y":-172.88},{"x":12.77,"y":-172.88},{"x":6.19,"y":-184.28},{"x":12.77,"y":-172.88}],"{-12.19,-216.11}":[{"x":-21.36,"y":-200.19},{"x":-34.54,"y":-200.19},{"x":-34.54,"y":-200.19},{"x":-18.77,"y":-227.5},{"x":-18.77,"y":-227.5},{"x":12.77,"y":-227.5},{"x":6.19,"y":-216.11},{"x":12.77,"y":-227.5}],"{-12.46,-0.74}":[{"x":-1.48,"y":1.03},{"x":-15.35,"y":-3.62},{"x":-11.42,"y":3.2},{"x":-1.48,"y":1.03}],"{-12.46,7.14}":[{"x":-11.42,"y":3.2},{"x":-4.24,"y":7.69},{"x":-9.47,"y":14.17},{"x":-4.24,"y":7.69},{"x":-15.35,"y":10.02},{"x":-9.47,"y":14.17}],"{-13.81,61.66}":[{"x":-14.96,"y":63.56},{"x":-26.53,"y":56.43},{"x":-26.53,"y":56.43},{"x":-7.82,"y":55.85}],"{-14.96,63.56}":[{"x":-16.58,"y":75.37},{"x":-26.53,"y":56.43},{"x":-26.53,"y":56.43},{"x":-13.81,"y":61.66}],"{-15.2,-47.9}":[{"x":-38.5,"y":-28.15},{"x":-51.65,"y":-47.9},{"x":-36.3,"y":-25.97},{"x":-38.5,"y":-28.15},{"x":-22.79,"y":-19.47},{"x":-36.3,"y":-25.97},{"x":7.53,"y":-47.9},{"x":-22.79,"y":-19.47},{"x":-15.78,"y":-72.19},{"x":7.53,"y":-47.9}],"{-15.35,-3.62}":[{"x":-22.79,"y":-19.47},{"x":16.68,"y":-39.69},{"x":5.19,"y":-1.75},{"x":16.68,"y":-39.69},{"x":-19.29,"y":-4.69},{"x":-22.79,"y":-19.47},{"x":5.19,"y":-1.75},{"x":-1.48,"y":1.03},{"x":-1.48,"y":1.03},{"x":-12.46,"y":-0.74}],"{-15.35,10.02}":[{"x":-12.46,"y":7.14},{"x":-9.47,"y":14.17},{"x":-9.47,"y":14.17},{"x":-19.29,"y":11.09}],"{-15.78,-72.19}":[{"x":7.53,"y":-47.9},{"x":-15.2,"y":-47.9},{"x":7.53,"y":-47.9},{"x":6.86,"y":-75.46},{"x":6.86,"y":-75.46},{"x":-1.6,"y":-83.58},{"x":-19.99,"y":-83.58},{"x":-1.6,"y":-83.58},{"x":-26.56,"y":-72.19},{"x":-19.99,"y":-83.58}],"{-16.58,75.37}":[{"x":-43.99,"y":68.56},{"x":-26.53,"y":56.43},{"x":-26.53,"y":56.43},{"x":-14.96,"y":63.56},{"x":-41,"y":79.69},{"x":-43.99,"y":68.56},{"x":-43.99,"y":90.84},{"x":-41,"y":79.69},{"x":-5.82,"y":82.44},{"x":-43.99,"y":90.84}],"{-18.77,-172.88}":[{"x":-34.54,"y":-200.19},{"x":-12.19,"y":-184.28},{"x":-12.19,"y":-184.28},{"x":12.77,"y":-172.88}],"{-18.77,-227.5}":[{"x":-34.54,"y":-200.19},{"x":-12.19,"y":-216.11},{"x":-12.19,"y":-216.11},{"x":12.77,"y":-227.5}],"{-186.51,-112.22}":[{"x":-247.27,"y":-229.82},{"x":-225.52,"y":-236.49},{"x":-207.96,"y":-104.64},{"x":-247.27,"y":-229.82},{"x":-203.55,"y":-82.11},{"x":-207.96,"y":-104.64},{"x":-39.29,"y":-140.05},{"x":-203.55,"y":-82.11},{"x":-70.46,"y":-153.13},{"x":-39.29,"y":-140.05}],"{-19.29,-4.69}":[{"x":-15.35,"y":-3.62},{"x":-22.79,"y":-19.47},{"x":-23.24,"y":-3.62},{"x":-22.79,"y":-19.47}],"{-19.29,11.09}":[{"x":-9.47,"y":14.17},{"x":-15.35,"y":10.02},{"x":-34.25,"y":51.28},{"x":-23.24,"y":10.02},{"x":-9.47,"y":14.17},{"x":-34.25,"y":51.28}],"{-19.99,-115.41}":[{"x":-29.16,"y":-99.5},{"x":-42.32,"y":-99.5},{"x":-42.32,"y":-99.5},{"x":-26.56,"y":-126.8},{"x":-26.56,"y":-126.8},{"x":4.96,"y":-126.8},{"x":-1.6,"y":-115.41},{"x":4.96,"y":-126.8}],"{-19.99,-83.58}":[{"x":-15.78,"y":-72.19},{"x":-1.6,"y":-83.58},{"x":-26.56,"y":-72.19},{"x":-15.78,"y":-72.19},{"x":-26.56,"y":-72.19},{"x":-42.32,"y":-99.5},{"x":-42.32,"y":-99.5},{"x":-29.16,"y":-99.5}],"{-203.55,-82.11}":[{"x":-207.96,"y":-104.64},{"x":-186.51,"y":-112.22},{"x":-39.29,"y":-140.05},{"x":-186.51,"y":-112.22},{"x":-211.11,"y":-103.53},{"x":-207.96,"y":-104.64}],"{-207.96,-104.64}":[{"x":-247.27,"y":-229.82},{"x":-186.51,"y":-112.22},{"x":-203.55,"y":-82.11},{"x":-186.51,"y":-112.22},{"x":-211.11,"y":-103.53},{"x":-203.55,"y":-82.11}],"{-21.36,-200.19}":[{"x":-12.19,"y":-184.28},{"x":-34.54,"y":-200.19},{"x":-34.54,"y":-200.19},{"x":-12.19,"y":-216.11}],"{-211.11,-103.53}":[{"x":-207.96,"y":-104.64},{"x":-203.55,"y":-82.11}],"{-22.79,-19.47}":[{"x":-15.2,"y":-47.9},{"x":-36.3,"y":-25.97},{"x":-35.53,"y":-23},{"x":-36.3,"y":-25.97},{"x":-15.2,"y":-47.9},{"x":7.53,"y":-47.9},{"x":-36.3,"y":-20.02},{"x":-35.53,"y":-23},{"x":16.68,"y":-39.69},{"x":7.53,"y":-47.9},{"x":-36.86,"y":-19.47},{"x":-36.3,"y":-20.02},{"x":16.68,"y":-39.69},{"x":-15.35,"y":-3.62},{"x":-15.35,"y":-3.62},{"x":-19.29,"y":-4.69},{"x":-23.24,"y":-3.62},{"x":-19.29,"y":-4.69},{"x":-23.24,"y":-3.62},{"x":-26.13,"y":-0.74},{"x":-26.13,"y":-0.74},{"x":-51.53,"y":61.03}],"{-225.52,-236.49}":[{"x":-247.27,"y":-229.82},{"x":-232.33,"y":-258.17},{"x":-232.33,"y":-258.17},{"x":-114.67,"y":-294.01},{"x":-186.51,"y":-112.22},{"x":-247.27,"y":-229.82},{"x":-114.67,"y":-294.01},{"x":-107.86,"y":-272.31}],"{-23.24,-3.62}":[{"x":-22.79,"y":-19.47},{"x":-19.29,"y":-4.69},{"x":-26.13,"y":-0.74},{"x":-22.79,"y":-19.47}],"{-23.24,10.02}":[{"x":-34.25,"y":51.28},{"x":-26.13,"y":7.14},{"x":-34.25,"y":51.28},{"x":-19.29,"y":11.09}],"{-232.33,-258.17}":[{"x":-247.27,"y":-229.82},{"x":-254.94,"y":-251.33},{"x":-254.94,"y":-251.33},{"x":-232.43,"y":-258.48},{"x":-247.27,"y":-229.82},{"x":-225.52,"y":-236.49},{"x":-225.52,"y":-236.49},{"x":-114.67,"y":-294.01}],"{-232.43,-258.48}":[{"x":-232.33,"y":-258.17},{"x":-254.94,"y":-251.33}],"{-247.27,-229.82}":[{"x":-248.3,"y":-229.51},{"x":-254.94,"y":-251.33},{"x":-232.33,"y":-258.17},{"x":-254.94,"y":-251.33},{"x":-232.33,"y":-258.17},{"x":-225.52,"y":-236.49},{"x":-186.51,"y":-112.22},{"x":-225.52,"y":-236.49},{"x":-207.96,"y":-104.64},{"x":-186.51,"y":-112.22}],"{-248.3,-229.51}":[{"x":-254.94,"y":-251.33},{"x":-247.27,"y":-229.82}],"{-254.94,-251.33}":[{"x":-248.3,"y":-229.51},{"x":-247.27,"y":-229.82},{"x":-232.33,"y":-258.17},{"x":-247.27,"y":-229.82},{"x":-232.33,"y":-258.17},{"x":-232.43,"y":-258.48}],"{-26.13,-0.74}":[{"x":-23.24,"y":-3.62},{"x":-22.79,"y":-19.47},{"x":-22.79,"y":-19.47},{"x":-51.53,"y":61.03},{"x":-27.17,"y":3.2},{"x":-51.53,"y":61.03}],"{-26.13,7.14}":[{"x":-51.53,"y":61.03},{"x":-27.17,"y":3.2},{"x":-34.25,"y":51.28},{"x":-51.53,"y":61.03},{"x":-34.25,"y":51.28},{"x":-23.24,"y":10.02}],"{-26.53,56.43}":[{"x":-43.99,"y":68.56},{"x":-34.25,"y":51.28},{"x":-43.99,"y":68.56},{"x":-16.58,"y":75.37},{"x":-16.58,"y":75.37},{"x":-14.96,"y":63.56},{"x":-14.96,"y":63.56},{"x":-13.81,"y":61.66},{"x":-13.81,"y":61.66},{"x":-7.82,"y":55.85},{"x":-7.82,"y":55.85},{"x":-1.73,"y":19.3}],"{-26.56,-126.8}":[{"x":-42.32,"y":-99.5},{"x":-19.99,"y":-115.41},{"x":-19.99,"y":-115.41},{"x":4.96,"y":-126.8}],"{-26.56,-72.19}":[{"x":-19.99,"y":-83.58},{"x":-15.78,"y":-72.19},{"x":-42.32,"y":-99.5},{"x":-19.99,"y":-83.58}],"{-27.17,3.2}":[{"x":-51.53,"y":61.03},{"x":-26.13,"y":-0.74},{"x":-26.13,"y":7.14},{"x":-51.53,"y":61.03}],"{-29.16,-99.5}":[{"x":-19.99,"y":-83.58},{"x":-42.32,"y":-99.5},{"x":-42.32,"y":-99.5},{"x":-19.99,"y":-115.41}],"{-3.79,55.01}":[{"x":-1.73,"y":19.3},{"x":4.06,"y":55.29},{"x":-7.82,"y":55.85},{"x":-1.73,"y":19.3}],"{-34.25,51.28}":[{"x":-26.13,"y":7.14},{"x":-51.53,"y":61.03},{"x":-43.99,"y":68.56},{"x":-51.53,"y":61.03},{"x":-26.13,"y":7.14},{"x":-23.24,"y":10.02},{"x":-43.99,"y":68.56},{"x":-26.53,"y":56.43},{"x":-23.24,"y":10.02},{"x":-19.29,"y":11.09},{"x":-9.47,"y":14.17},{"x":-19.29,"y":11.09}],"{-34.54,-200.19}":[{"x":-18.77,"y":-172.88},{"x":-12.19,"y":-184.28},{"x":-12.19,"y":-184.28},{"x":-21.36,"y":-200.19},{"x":-21.36,"y":-200.19},{"x":-12.19,"y":-216.11},{"x":-18.77,"y":-227.5},{"x":-12.19,"y":-216.11}],"{-35.53,-23}":[{"x":-22.79,"y":-19.47},{"x":-36.3,"y":-25.97},{"x":-36.3,"y":-20.02},{"x":-22.79,"y":-19.47}],"{-36.3,-20.02}":[{"x":-35.53,"y":-23},{"x":-22.79,"y":-19.47},{"x":-36.86,"y":-19.47},{"x":-22.79,"y":-19.47}],"{-36.3,-25.97}":[{"x":-38.5,"y":-28.15},{"x":-15.2,"y":-47.9},{"x":-15.2,"y":-47.9},{"x":-22.79,"y":-19.47},{"x":-22.79,"y":-19.47},{"x":-35.53,"y":-23}],"{-36.86,-19.47}":[{"x":-36.3,"y":-20.02},{"x":-22.79,"y":-19.47}],"{-38.5,-28.15}":[{"x":-51.65,"y":-47.9},{"x":-41.09,"y":-28.82},{"x":-15.2,"y":-47.9},{"x":-51.65,"y":-47.9},{"x":-36.3,"y":-25.97},{"x":-15.2,"y":-47.9}],"{-39.29,-140.05}":[{"x":-203.55,"y":-82.11},{"x":-186.51,"y":-112.22},{"x":-70.46,"y":-153.13},{"x":-186.51,"y":-112.22},{"x":-48.99,"y":-160.72},{"x":-70.46,"y":-153.13},{"x":-48.99,"y":-160.72},{"x":-46.86,"y":-161.47}],"{-4,84}":[{"x":-47.31,"y":94.16},{"x":-5.82,"y":82.44},{"x":54.5,"y":94.16}],"{-4.24,7.69}":[{"x":-11.42,"y":3.2},{"x":-1.48,"y":1.03},{"x":-12.46,"y":7.14},{"x":-11.42,"y":3.2},{"x":-9.47,"y":14.17},{"x":-12.46,"y":7.14},{"x":-9.47,"y":14.17},{"x":-1.48,"y":14.35}],"{-41,79.69}":[{"x":-43.99,"y":68.56},{"x":-16.58,"y":75.37},{"x":-43.99,"y":90.84},{"x":-16.58,"y":75.37}],"{-41.09,-28.82}":[{"x":-47.52,"y":-28.82},{"x":-51.65,"y":-47.9},{"x":-51.65,"y":-47.9},{"x":-38.5,"y":-28.15}],"{-42.32,-99.5}":[{"x":-26.56,"y":-72.19},{"x":-19.99,"y":-83.58},{"x":-19.99,"y":-83.58},{"x":-29.16,"y":-99.5},{"x":-29.16,"y":-99.5},{"x":-19.99,"y":-115.41},{"x":-26.56,"y":-126.8},{"x":-19.99,"y":-115.41}],"{-43.99,68.56}":[{"x":-51.53,"y":61.03},{"x":-34.25,"y":51.28},{"x":-34.25,"y":51.28},{"x":-26.53,"y":56.43},{"x":-26.53,"y":56.43},{"x":-16.58,"y":75.37},{"x":-41,"y":79.69},{"x":-16.58,"y":75.37}],"{-43.99,90.84}":[{"x":-41,"y":79.69},{"x":-16.58,"y":75.37},{"x":-5.82,"y":82.44},{"x":-16.58,"y":75.37},{"x":-47.31,"y":94.16},{"x":-5.82,"y":82.44}],"{-46.86,-161.47}":[{"x":-39.29,"y":-140.05},{"x":-48.99,"y":-160.72}],"{-47.31,94.16}":[{"x":-43.99,"y":90.84},{"x":-5.82,"y":82.44},{"x":-5.82,"y":82.44},{"x":54.5,"y":94.16},{"x":-4,"y":84}],"{-47.52,-28.82}":[{"x":-50.07,"y":-28.15},{"x":-51.65,"y":-47.9},{"x":-41.09,"y":-28.82},{"x":-51.65,"y":-47.9}],"{-48.99,-160.72}":[{"x":-107.86,"y":-272.31},{"x":-86.1,"y":-278.94},{"x":-70.46,"y":-153.13},{"x":-107.86,"y":-272.31},{"x":-39.29,"y":-140.05},{"x":-70.46,"y":-153.13},{"x":-39.29,"y":-140.05},{"x":-46.86,"y":-161.47}],"{-5.82,82.44}":[{"x":-43.99,"y":90.84},{"x":-16.58,"y":75.37},{"x":-47.31,"y":94.16},{"x":-43.99,"y":90.84},{"x":-47.31,"y":94.16},{"x":54.5,"y":94.16},{"x":1.98,"y":81.82},{"x":54.5,"y":94.16},{"x":-4,"y":84}],"{-50.07,-28.15}":[{"x":-51.65,"y":-26.6},{"x":-51.65,"y":-47.9},{"x":-51.65,"y":-47.9},{"x":-47.52,"y":-28.82}],"{-51.53,61.03}":[{"x":-22.79,"y":-19.47},{"x":-26.13,"y":-0.74},{"x":-27.17,"y":3.2},{"x":-26.13,"y":-0.74},{"x":-26.13,"y":7.14},{"x":-27.17,"y":3.2},{"x":-26.13,"y":7.14},{"x":-34.25,"y":51.28},{"x":-43.99,"y":68.56},{"x":-34.25,"y":51.28}],"{-51.65,-26.6}":[{"x":-51.65,"y":-47.9},{"x":-50.07,"y":-28.15}],"{-51.65,-47.9}":[{"x":-51.65,"y":-26.6},{"x":-50.07,"y":-28.15},{"x":-50.07,"y":-28.15},{"x":-47.52,"y":-28.82},{"x":-41.09,"y":-28.82},{"x":-47.52,"y":-28.82},{"x":-38.5,"y":-28.15},{"x":-41.09,"y":-28.82},{"x":-15.2,"y":-47.9},{"x":-38.5,"y":-28.15}],"{-57.06,26.45}":[{"x":-63.29,"y":57.41},{"x":-79.25,"y":26.45},{"x":-63.29,"y":57.41},{"x":-57.06,"y":59.09}],"{-57.06,59.09}":[{"x":-63.29,"y":57.41},{"x":-57.06,"y":26.45}],"{-63.29,57.41}":[{"x":-74.43,"y":60.4},{"x":-79.25,"y":26.45},{"x":-79.25,"y":26.45},{"x":-57.06,"y":26.45},{"x":-57.06,"y":26.45},{"x":-57.06,"y":59.09}],"{-7.82,55.85}":[{"x":-3.79,"y":55.01},{"x":-1.73,"y":19.3},{"x":-13.81,"y":61.66},{"x":-26.53,"y":56.43},{"x":-26.53,"y":56.43},{"x":-1.73,"y":19.3}],"{-70.46,-153.13}":[{"x":-39.29,"y":-140.05},{"x":-186.51,"y":-112.22},{"x":-107.86,"y":-272.31},{"x":-48.99,"y":-160.72},{"x":-48.99,"y":-160.72},{"x":-39.29,"y":-140.05}],"{-74.43,60.4}":[{"x":-79.25,"y":65.22},{"x":-79.25,"y":26.45},{"x":-79.25,"y":26.45},{"x":-63.29,"y":57.41}],"{-79.25,26.45}":[{"x":-79.25,"y":65.22},{"x":-74.43,"y":60.4},{"x":-74.43,"y":60.4},{"x":-63.29,"y":57.41},{"x":-63.29,"y":57.41},{"x":-57.06,"y":26.45}],"{-79.25,65.22}":[{"x":-79.25,"y":26.45},{"x":-74.43,"y":60.4}],"{-81.68,-280.28}":[{"x":-86.1,"y":-278.94},{"x":-88.3,"y":-302.03}],"{-86.1,-278.94}":[{"x":-107.86,"y":-272.31},{"x":-92.91,"y":-300.61},{"x":-92.91,"y":-300.61},{"x":-88.3,"y":-302.03},{"x":-48.99,"y":-160.72},{"x":-107.86,"y":-272.31},{"x":-81.68,"y":-280.28},{"x":-88.3,"y":-302.03}],"{-88.3,-302.03}":[{"x":-86.1,"y":-278.94},{"x":-92.91,"y":-300.61},{"x":-81.68,"y":-280.28},{"x":-86.1,"y":-278.94}],"{-9.47,14.17}":[{"x":-12.46,"y":7.14},{"x":-4.24,"y":7.69},{"x":-4.24,"y":7.69},{"x":-1.48,"y":14.35},{"x":-15.35,"y":10.02},{"x":-12.46,"y":7.14},{"x":-1.73,"y":19.3},{"x":-1.48,"y":14.35},{"x":-19.29,"y":11.09},{"x":-15.35,"y":10.02},{"x":-34.25,"y":51.28},{"x":-19.29,"y":11.09}],"{-92.91,-300.61}":[{"x":-107.86,"y":-272.31},{"x":-114.67,"y":-294.01},{"x":-114.67,"y":-294.01},{"x":-94.73,"y":-306.39},{"x":-107.86,"y":-272.31},{"x":-86.1,"y":-278.94},{"x":-86.1,"y":-278.94},{"x":-88.3,"y":-302.03}],"{-94.73,-306.39}":[{"x":-114.67,"y":-294.01},{"x":-92.91,"y":-300.61},{"x":-114.67,"y":-294.01},{"x":-116.43,"y":-299.57}],"{1.98,81.82}":[{"x":6.76,"y":81.04},{"x":54.5,"y":94.16},{"x":-5.82,"y":82.44},{"x":54.5,"y":94.16}],"{100.1,-199.99}":[{"x":101.39,"y":-201.28},{"x":110.36,"y":-199.99}],"{101.39,-201.28}":[{"x":102.4,"y":-205.1},{"x":110.36,"y":-199.99},{"x":100.1,"y":-199.99},{"x":110.36,"y":-199.99}],"{101.39,-208.92}":[{"x":102.4,"y":-205.1},{"x":103.78,"y":-211.38},{"x":98.91,"y":-211.38},{"x":103.78,"y":-211.38}],"{102.4,-205.1}":[{"x":103.78,"y":-211.38},{"x":110.36,"y":-199.99},{"x":101.39,"y":-201.28},{"x":110.36,"y":-199.99},{"x":101.39,"y":-208.92},{"x":103.78,"y":-211.38}],"{103.78,-211.38}":[{"x":110.36,"y":-199.99},{"x":112.97,"y":-227.3},{"x":102.4,"y":-205.1},{"x":110.36,"y":-199.99},{"x":102.4,"y":-205.1},{"x":101.39,"y":-208.92},{"x":101.39,"y":-208.92},{"x":98.91,"y":-211.38}],"{103.78,-243.21}":[{"x":85.4,"y":-243.21},{"x":110.36,"y":-254.6},{"x":110.36,"y":-254.6},{"x":112.97,"y":-227.3}],"{11.85,1.02}":[{"x":5.19,"y":-1.75},{"x":27.48,"y":-13.33},{"x":14.64,"y":7.69},{"x":27.48,"y":-13.33}],"{11.85,14.35}":[{"x":14.64,"y":7.69},{"x":20.68,"y":12.98},{"x":20.68,"y":12.98},{"x":20.68,"y":57.61},{"x":20.68,"y":57.61},{"x":5.19,"y":17.14}],"{110.36,-199.99}":[{"x":112.97,"y":-227.3},{"x":126.13,"y":-227.3},{"x":103.78,"y":-211.38},{"x":112.97,"y":-227.3},{"x":102.4,"y":-205.1},{"x":103.78,"y":-211.38},{"x":101.39,"y":-201.28},{"x":102.4,"y":-205.1},{"x":100.1,"y":-199.99},{"x":101.39,"y":-201.28}],"{110.36,-254.6}":[{"x":85.4,"y":-243.21},{"x":78.82,"y":-254.6},{"x":103.78,"y":-243.21},{"x":85.4,"y":-243.21},{"x":103.78,"y":-243.21},{"x":112.97,"y":-227.3},{"x":126.13,"y":-227.3},{"x":112.97,"y":-227.3}],"{112.97,-227.3}":[{"x":103.78,"y":-243.21},{"x":110.36,"y":-254.6},{"x":126.13,"y":-227.3},{"x":110.36,"y":-254.6},{"x":110.36,"y":-199.99},{"x":126.13,"y":-227.3},{"x":110.36,"y":-199.99},{"x":103.78,"y":-211.38}],"{12.77,-172.88}":[{"x":-18.77,"y":-172.88},{"x":-12.19,"y":-184.28},{"x":-12.19,"y":-184.28},{"x":6.19,"y":-184.28},{"x":28.53,"y":-200.19},{"x":6.19,"y":-184.28}],"{12.77,-227.5}":[{"x":-12.19,"y":-216.11},{"x":-18.77,"y":-227.5},{"x":6.19,"y":-216.11},{"x":-12.19,"y":-216.11},{"x":28.53,"y":-200.19},{"x":6.19,"y":-216.11}],"{126.13,-227.3}":[{"x":112.97,"y":-227.3},{"x":110.36,"y":-254.6},{"x":110.36,"y":-199.99},{"x":112.97,"y":-227.3}],"{128.19,-11.8}":[{"x":128.19,"y":18.63},{"x":150.36,"y":-11.8}],"{128.19,18.63}":[{"x":81.19,"y":41.36},{"x":73.08,"y":18.63},{"x":81.19,"y":41.36},{"x":128.19,"y":41.36},{"x":128.19,"y":41.36},{"x":150.36,"y":23.47},{"x":150.36,"y":-11.8},{"x":150.36,"y":23.47},{"x":128.19,"y":-11.8},{"x":150.36,"y":-11.8}],"{128.19,41.36}":[{"x":81.19,"y":41.36},{"x":128.19,"y":18.63},{"x":128.19,"y":18.63},{"x":150.36,"y":23.47},{"x":155.34,"y":24.33},{"x":150.36,"y":23.47},{"x":155.34,"y":24.33},{"x":128.19,"y":55.9}],"{128.19,55.9}":[{"x":155.34,"y":24.33},{"x":128.19,"y":41.36},{"x":155.34,"y":24.33},{"x":195.68,"y":19.44},{"x":195.68,"y":19.44},{"x":261.94,"y":55.9}],"{14.3,72.02}":[{"x":36.91,"y":57.61},{"x":16.85,"y":63.69},{"x":54.5,"y":94.16},{"x":36.91,"y":57.61},{"x":6.76,"y":81.04},{"x":54.5,"y":94.16}],"{14.64,7.69}":[{"x":11.85,"y":1.02},{"x":27.48,"y":-13.33},{"x":27.48,"y":-13.33},{"x":20.68,"y":12.98},{"x":11.85,"y":14.35},{"x":20.68,"y":12.98}],"{15.36,-200.19}":[{"x":28.53,"y":-200.19},{"x":6.19,"y":-184.28},{"x":6.19,"y":-216.11},{"x":28.53,"y":-200.19}],"{15.69,-43.5}":[{"x":16.68,"y":-39.69},{"x":7.53,"y":-47.9},{"x":7.53,"y":-47.9},{"x":16.69,"y":-47.3}],"{150.36,-11.8}":[{"x":128.19,"y":18.63},{"x":150.36,"y":23.47},{"x":128.19,"y":18.63},{"x":128.19,"y":-11.8}],"{150.36,23.47}":[{"x":128.19,"y":41.36},{"x":128.19,"y":18.63},{"x":128.19,"y":18.63},{"x":150.36,"y":-11.8},{"x":155.34,"y":24.33},{"x":128.19,"y":41.36}],"{155.34,24.33}":[{"x":128.19,"y":41.36},{"x":150.36,"y":23.47},{"x":128.19,"y":55.9},{"x":128.19,"y":41.36},{"x":128.19,"y":55.9},{"x":195.68,"y":19.44},{"x":184.64,"y":-57.72},{"x":193.67,"y":-7.14},{"x":184.9,"y":12.36},{"x":195.68,"y":19.44},{"x":193.67,"y":-7.14},{"x":187.69,"y":-1.35},{"x":186.52,"y":0.55},{"x":184.9,"y":12.36},{"x":187.69,"y":-1.35},{"x":186.52,"y":0.55}],"{155.78,-57.72}":[{"x":184.64,"y":-57.72},{"x":155.78,"y":-86.16}],"{155.78,-86.16}":[{"x":187.12,"y":-86.16},{"x":184.64,"y":-57.72},{"x":184.64,"y":-57.72},{"x":155.78,"y":-57.72}],"{16.68,-39.69}":[{"x":-22.79,"y":-19.47},{"x":7.53,"y":-47.9},{"x":7.53,"y":-47.9},{"x":15.69,"y":-43.5},{"x":-22.79,"y":-19.47},{"x":-15.35,"y":-3.62},{"x":5.19,"y":-1.75},{"x":-15.35,"y":-3.62},{"x":5.19,"y":-1.75},{"x":19.49,"y":-36.9}],"{16.69,-47.3}":[{"x":15.69,"y":-43.5},{"x":7.53,"y":-47.9},{"x":7.53,"y":-47.9},{"x":17.29,"y":-47.9}],"{16.85,63.69}":[{"x":6.51,"y":56.28},{"x":20.68,"y":57.61},{"x":20.68,"y":57.61},{"x":36.91,"y":57.61},{"x":36.91,"y":57.61},{"x":14.3,"y":72.02}],"{166.88,-141.19}":[{"x":205.75,"y":-141.19},{"x":166.88,"y":-154.56}],"{166.88,-154.56}":[{"x":19.04,"y":-102.41},{"x":7.49,"y":-122.43},{"x":166.88,"y":-178.65},{"x":7.49,"y":-122.43},{"x":166.88,"y":-178.65},{"x":189.07,"y":-173.63},{"x":205.75,"y":-141.19},{"x":189.07,"y":-173.63},{"x":205.75,"y":-141.19},{"x":166.88,"y":-141.19}],"{166.88,-178.65}":[{"x":166.88,"y":-154.56},{"x":7.49,"y":-122.43},{"x":166.88,"y":-154.56},{"x":189.07,"y":-173.63},{"x":189.07,"y":-208.89},{"x":189.07,"y":-173.63},{"x":166.88,"y":-208.89},{"x":189.07,"y":-208.89}],"{166.88,-208.89}":[{"x":166.88,"y":-178.65},{"x":189.07,"y":-208.89}],"{17.29,-47.9}":[{"x":16.69,"y":-47.3},{"x":7.53,"y":-47.9}],"{184.64,-57.72}":[{"x":211.14,"y":-86.16},{"x":187.12,"y":-86.16},{"x":187.12,"y":-86.16},{"x":155.78,"y":-86.16},{"x":211.14,"y":-86.16},{"x":234.92,"y":-51.58},{"x":155.78,"y":-57.72},{"x":155.78,"y":-86.16},{"x":234.92,"y":-51.58},{"x":205.54,"y":-7.69},{"x":205.54,"y":-7.69},{"x":197.71,"y":-7.97},{"x":193.67,"y":-7.14},{"x":197.71,"y":-7.97},{"x":155.34,"y":24.33},{"x":193.67,"y":-7.14}],"{184.9,12.36}":[{"x":155.34,"y":24.33},{"x":195.68,"y":19.44},{"x":186.52,"y":0.55},{"x":155.34,"y":24.33}],"{186.52,0.55}":[{"x":184.9,"y":12.36},{"x":155.34,"y":24.33},{"x":155.34,"y":24.33},{"x":187.69,"y":-1.35}],"{187.12,-86.16}":[{"x":205.75,"y":-141.19},{"x":211.14,"y":-86.16},{"x":211.14,"y":-86.16},{"x":184.64,"y":-57.72},{"x":184.64,"y":-57.72},{"x":155.78,"y":-86.16}],"{187.69,-1.35}":[{"x":155.34,"y":24.33},{"x":193.67,"y":-7.14},{"x":155.34,"y":24.33},{"x":186.52,"y":0.55}],"{189.07,-173.63}":[{"x":166.88,"y":-154.56},{"x":166.88,"y":-178.65},{"x":166.88,"y":-178.65},{"x":189.07,"y":-208.89},{"x":205.75,"y":-141.19},{"x":166.88,"y":-154.56},{"x":194.05,"y":-172.77},{"x":205.75,"y":-141.19}],"{189.07,-208.89}":[{"x":166.88,"y":-178.65},{"x":189.07,"y":-173.63},{"x":166.88,"y":-178.65},{"x":166.88,"y":-208.89}],"{19.04,-102.41}":[{"x":20.73,"y":-99.5},{"x":7.57,"y":-99.5},{"x":7.57,"y":-99.5},{"x":7.49,"y":-122.43},{"x":166.88,"y":-154.56},{"x":7.49,"y":-122.43}],"{19.49,-36.9}":[{"x":5.19,"y":-1.75},{"x":16.68,"y":-39.69},{"x":27.48,"y":-13.33},{"x":5.19,"y":-1.75},{"x":27.48,"y":-13.33},{"x":23.29,"y":-35.89}],"{193.67,-7.14}":[{"x":184.64,"y":-57.72},{"x":197.71,"y":-7.97},{"x":155.34,"y":24.33},{"x":184.64,"y":-57.72},{"x":155.34,"y":24.33},{"x":187.69,"y":-1.35}],"{194.05,-172.77}":[{"x":189.07,"y":-173.63},{"x":205.75,"y":-141.19},{"x":229.76,"y":-141.19},{"x":205.75,"y":-141.19},{"x":273.63,"y":-248.69},{"x":229.76,"y":-141.19},{"x":273.63,"y":-248.69},{"x":223.34,"y":-254.83}],"{194.49,-254.83}":[{"x":223.34,"y":-254.83},{"x":194.49,"y":-283.26},{"x":202,"y":-268}],"{194.49,-283.26}":[{"x":273.63,"y":-283.26},{"x":223.34,"y":-254.83},{"x":223.34,"y":-254.83},{"x":194.49,"y":-254.83},{"x":202,"y":-268}],"{195.68,19.44}":[{"x":128.19,"y":55.9},{"x":155.34,"y":24.33},{"x":155.34,"y":24.33},{"x":184.9,"y":12.36},{"x":261.94,"y":55.9},{"x":128.19,"y":55.9},{"x":203.49,"y":18.83},{"x":261.94,"y":55.9}],"{197.71,-7.97}":[{"x":205.54,"y":-7.69},{"x":184.64,"y":-57.72},{"x":193.67,"y":-7.14},{"x":184.64,"y":-57.72}],"{20.68,12.98}":[{"x":27.48,"y":-13.33},{"x":14.64,"y":7.69},{"x":11.85,"y":14.35},{"x":14.64,"y":7.69},{"x":38.93,"y":6.77},{"x":27.48,"y":-13.33},{"x":11.85,"y":14.35},{"x":20.68,"y":57.61},{"x":36.91,"y":12.98},{"x":38.93,"y":6.77}],"{20.68,57.61}":[{"x":11.85,"y":14.35},{"x":20.68,"y":12.98},{"x":5.19,"y":17.14},{"x":11.85,"y":14.35},{"x":6.51,"y":56.28},{"x":5.19,"y":17.14},{"x":16.85,"y":63.69},{"x":6.51,"y":56.28},{"x":16.85,"y":63.69},{"x":36.91,"y":57.61}],"{20.73,-99.5}":[{"x":6.86,"y":-75.46},{"x":7.57,"y":-99.5},{"x":7.57,"y":-99.5},{"x":19.04,"y":-102.41}],"{202,-268}":[{"x":223.34,"y":-254.83},{"x":194.49,"y":-254.83},{"x":194.49,"y":-283.26}],"{203.49,18.83}":[{"x":195.68,"y":19.44},{"x":261.94,"y":55.9},{"x":208.26,"y":18.05},{"x":261.94,"y":55.9}],"{205.54,-7.69}":[{"x":234.92,"y":-51.58},{"x":184.64,"y":-57.72},{"x":197.71,"y":-7.97},{"x":184.64,"y":-57.72},{"x":208,"y":-6.7},{"x":234.92,"y":-51.58}],"{205.75,-141.19}":[{"x":166.88,"y":-154.56},{"x":189.07,"y":-173.63},{"x":189.07,"y":-173.63},{"x":194.05,"y":-172.77},{"x":166.88,"y":-141.19},{"x":166.88,"y":-154.56},{"x":229.76,"y":-141.19},{"x":194.05,"y":-172.77},{"x":211.14,"y":-86.16},{"x":229.76,"y":-141.19},{"x":187.12,"y":-86.16},{"x":211.14,"y":-86.16}],"{208,-6.7}":[{"x":205.54,"y":-7.69},{"x":234.92,"y":-51.58},{"x":218.36,"y":0.68},{"x":234.92,"y":-51.58}],"{208.26,18.05}":[{"x":203.49,"y":18.83},{"x":261.94,"y":55.9},{"x":215.8,"y":9.02},{"x":261.94,"y":18.08},{"x":261.94,"y":55.9},{"x":261.94,"y":18.08}],"{211.14,-86.16}":[{"x":205.75,"y":-141.19},{"x":229.76,"y":-141.19},{"x":187.12,"y":-86.16},{"x":205.75,"y":-141.19},{"x":184.64,"y":-57.72},{"x":187.12,"y":-86.16},{"x":184.64,"y":-57.72},{"x":234.92,"y":-51.58},{"x":234.92,"y":-86.16},{"x":234.92,"y":-51.58}],"{215.8,9.02}":[{"x":218.36,"y":0.68},{"x":261.94,"y":18.08},{"x":208.26,"y":18.05},{"x":261.94,"y":18.08}],"{218.36,0.68}":[{"x":208,"y":-6.7},{"x":234.92,"y":-51.58},{"x":234.92,"y":-51.58},{"x":279.26,"y":-23.08},{"x":261.94,"y":18.08},{"x":279.26,"y":-23.08},{"x":215.8,"y":9.02},{"x":261.94,"y":18.08}],"{223.34,-254.83}":[{"x":273.63,"y":-248.69},{"x":194.05,"y":-172.77},{"x":273.63,"y":-283.26},{"x":273.63,"y":-248.69},{"x":273.63,"y":-283.26},{"x":194.49,"y":-283.26},{"x":194.49,"y":-254.83},{"x":194.49,"y":-283.26},{"x":202,"y":-268}],"{229.76,-141.19}":[{"x":205.75,"y":-141.19},{"x":194.05,"y":-172.77},{"x":273.63,"y":-248.69},{"x":194.05,"y":-172.77},{"x":211.14,"y":-86.16},{"x":205.75,"y":-141.19},{"x":273.63,"y":-248.69},{"x":300.64,"y":-166.87},{"x":300.64,"y":-166.87},{"x":300.64,"y":-141.19}],"{23.29,-35.89}":[{"x":27.48,"y":-13.33},{"x":19.49,"y":-36.9},{"x":27.1,"y":-36.9},{"x":27.48,"y":-13.33}],"{234.92,-51.58}":[{"x":184.64,"y":-57.72},{"x":211.14,"y":-86.16},{"x":211.14,"y":-86.16},{"x":234.92,"y":-86.16},{"x":205.54,"y":-7.69},{"x":184.64,"y":-57.72},{"x":208,"y":-6.7},{"x":205.54,"y":-7.69},{"x":218.36,"y":0.68},{"x":208,"y":-6.7},{"x":279.26,"y":-23.08},{"x":218.36,"y":0.68},{"x":279.26,"y":-23.08},{"x":268.54,"y":-53.13}],"{234.92,-86.16}":[{"x":211.14,"y":-86.16},{"x":234.92,"y":-51.58}],"{261.94,18.08}":[{"x":218.36,"y":0.68},{"x":279.26,"y":-23.08},{"x":279.26,"y":-23.08},{"x":287.07,"y":-1.24},{"x":215.8,"y":9.02},{"x":218.36,"y":0.68},{"x":287.07,"y":-1.24},{"x":293.45,"y":16.61},{"x":208.26,"y":18.05},{"x":215.8,"y":9.02},{"x":261.94,"y":55.9},{"x":208.26,"y":18.05}],"{261.94,55.9}":[{"x":195.68,"y":19.44},{"x":128.19,"y":55.9},{"x":195.68,"y":19.44},{"x":203.49,"y":18.83},{"x":203.49,"y":18.83},{"x":208.26,"y":18.05},{"x":208.26,"y":18.05},{"x":261.94,"y":18.08}],"{268.54,-53.13}":[{"x":279.26,"y":-23.08},{"x":234.92,"y":-51.58}],"{27.1,-36.9}":[{"x":23.29,"y":-35.89},{"x":27.48,"y":-13.33},{"x":27.48,"y":-37.28},{"x":27.48,"y":-13.33}],"{27.48,-13.33}":[{"x":5.19,"y":-1.75},{"x":19.49,"y":-36.9},{"x":19.49,"y":-36.9},{"x":23.29,"y":-35.89},{"x":11.85,"y":1.02},{"x":5.19,"y":-1.75},{"x":23.29,"y":-35.89},{"x":27.1,"y":-36.9},{"x":14.64,"y":7.69},{"x":11.85,"y":1.02},{"x":27.1,"y":-36.9},{"x":27.48,"y":-37.28},{"x":20.68,"y":12.98},{"x":14.64,"y":7.69},{"x":38.93,"y":6.77},{"x":20.68,"y":12.98},{"x":38.93,"y":6.77},{"x":39.2,"y":-8.5},{"x":39.2,"y":-8.5},{"x":61.09,"y":-14.87}],"{27.48,-37.28}":[{"x":27.1,"y":-36.9},{"x":27.48,"y":-13.33}],"{273.63,-248.69}":[{"x":229.76,"y":-141.19},{"x":194.05,"y":-172.77},{"x":194.05,"y":-172.77},{"x":223.34,"y":-254.83},{"x":229.76,"y":-141.19},{"x":300.64,"y":-166.87},{"x":223.34,"y":-254.83},{"x":273.63,"y":-283.26},{"x":300.64,"y":-166.87},{"x":303.72,"y":-168.59},{"x":303.72,"y":-168.59},{"x":307.23,"y":-250.22}],"{273.63,-283.26}":[{"x":223.34,"y":-254.83},{"x":273.63,"y":-248.69},{"x":223.34,"y":-254.83},{"x":194.49,"y":-283.26}],"{279.26,-23.08}":[{"x":234.92,"y":-51.58},{"x":218.36,"y":0.68},{"x":261.94,"y":18.08},{"x":218.36,"y":0.68},{"x":234.92,"y":-51.58},{"x":268.54,"y":-53.13},{"x":261.94,"y":18.08},{"x":287.07,"y":-1.24},{"x":287.07,"y":-1.24},{"x":344.29,"y":-32.42}],"{28.53,-200.19}":[{"x":12.77,"y":-172.88},{"x":6.19,"y":-184.28},{"x":6.19,"y":-184.28},{"x":15.36,"y":-200.19},{"x":15.36,"y":-200.19},{"x":6.19,"y":-216.11},{"x":12.77,"y":-227.5},{"x":6.19,"y":-216.11}],"{287.07,-1.24}":[{"x":261.94,"y":18.08},{"x":279.26,"y":-23.08},{"x":279.26,"y":-23.08},{"x":344.29,"y":-32.42},{"x":261.94,"y":18.08},{"x":293.45,"y":16.61},{"x":344.29,"y":-9.44},{"x":344.29,"y":-32.42}],"{293.45,16.61}":[{"x":261.94,"y":18.08},{"x":287.07,"y":-1.24}],"{300.64,-141.19}":[{"x":229.76,"y":-141.19},{"x":300.64,"y":-166.87}],"{300.64,-166.87}":[{"x":229.76,"y":-141.19},{"x":273.63,"y":-248.69},{"x":273.63,"y":-248.69},{"x":303.72,"y":-168.59},{"x":229.76,"y":-141.19},{"x":300.64,"y":-141.19}],"{303.72,-168.59}":[{"x":300.64,"y":-166.87},{"x":273.63,"y":-248.69},{"x":273.63,"y":-248.69},{"x":307.23,"y":-250.22},{"x":307.23,"y":-250.22},{"x":333.42,"y":-176.89},{"x":333.42,"y":-176.89},{"x":371.89,"y":-126.25}],"{307.23,-250.22}":[{"x":303.72,"y":-168.59},{"x":273.63,"y":-248.69},{"x":303.72,"y":-168.59},{"x":333.42,"y":-176.89}],"{333.42,-176.89}":[{"x":303.72,"y":-168.59},{"x":307.23,"y":-250.22},{"x":303.72,"y":-168.59},{"x":371.89,"y":-126.25},{"x":371.89,"y":-126.25},{"x":387.74,"y":-143.16}],"{344.29,-1.11}":[{"x":386.13,"y":-38.93},{"x":478.04,"y":-1.11},{"x":371.45,"y":-32.67},{"x":344.29,"y":-9.44},{"x":386.13,"y":-38.93},{"x":371.45,"y":-32.67}],"{344.29,-32.42}":[{"x":287.07,"y":-1.24},{"x":279.26,"y":-23.08},{"x":344.29,"y":-9.44},{"x":287.07,"y":-1.24},{"x":344.29,"y":-9.44},{"x":366.47,"y":-33.53},{"x":344.29,"y":-38.51},{"x":366.47,"y":-33.53}],"{344.29,-38.51}":[{"x":344.29,"y":-32.42},{"x":366.47,"y":-33.53},{"x":366.47,"y":-38.73},{"x":366.47,"y":-33.53}],"{344.29,-54.74}":[{"x":344.29,"y":-68.8},{"x":366.47,"y":-54.96}],"{344.29,-68.8}":[{"x":344.29,"y":-54.74},{"x":366.47,"y":-54.96},{"x":366.47,"y":-68.8},{"x":366.47,"y":-54.96}],"{344.29,-9.44}":[{"x":287.07,"y":-1.24},{"x":344.29,"y":-32.42},{"x":344.29,"y":-32.42},{"x":366.47,"y":-33.53},{"x":371.45,"y":-32.67},{"x":366.47,"y":-33.53},{"x":371.45,"y":-32.67},{"x":344.29,"y":-1.11}],"{36.91,12.98}":[{"x":20.68,"y":12.98},{"x":38.93,"y":6.77},{"x":38.93,"y":6.77},{"x":43.25,"y":10.67},{"x":43.25,"y":10.67},{"x":50.56,"y":10.67},{"x":50.56,"y":10.67},{"x":54.5,"y":56.31},{"x":54.5,"y":56.31},{"x":36.91,"y":57.61}],"{36.91,57.61}":[{"x":16.85,"y":63.69},{"x":20.68,"y":57.61},{"x":54.5,"y":56.31},{"x":36.91,"y":12.98},{"x":14.3,"y":72.02},{"x":16.85,"y":63.69},{"x":54.5,"y":56.31},{"x":54.5,"y":94.16},{"x":54.5,"y":94.16},{"x":14.3,"y":72.02}],"{366.47,-33.53}":[{"x":344.29,"y":-9.44},{"x":344.29,"y":-32.42},{"x":344.29,"y":-32.42},{"x":344.29,"y":-38.51},{"x":371.45,"y":-32.67},{"x":344.29,"y":-9.44},{"x":344.29,"y":-38.51},{"x":366.47,"y":-38.73}],"{366.47,-38.73}":[{"x":344.29,"y":-38.51},{"x":366.47,"y":-33.53}],"{366.47,-54.96}":[{"x":344.29,"y":-54.74},{"x":344.29,"y":-68.8},{"x":344.29,"y":-68.8},{"x":366.47,"y":-68.8}],"{366.47,-68.8}":[{"x":344.29,"y":-68.8},{"x":366.47,"y":-54.96}],"{371.45,-32.67}":[{"x":344.29,"y":-9.44},{"x":366.47,"y":-33.53},{"x":344.29,"y":-1.11},{"x":344.29,"y":-9.44},{"x":386.13,"y":-38.93},{"x":344.29,"y":-1.11},{"x":373.63,"y":-38.8},{"x":386.13,"y":-38.93}],"{371.89,-114.73}":[{"x":400.74,"y":-114.73},{"x":371.89,"y":-126.25}],"{371.89,-126.25}":[{"x":303.72,"y":-168.59},{"x":333.42,"y":-176.89},{"x":333.42,"y":-176.89},{"x":387.74,"y":-143.16},{"x":400.74,"y":-114.73},{"x":387.74,"y":-143.16},{"x":400.74,"y":-114.73},{"x":371.89,"y":-114.73}],"{373.63,-38.8}":[{"x":371.45,"y":-32.67},{"x":386.13,"y":-38.93}],"{379.45,-55.09}":[{"x":385.97,"y":-55.16},{"x":400.74,"y":-114.73}],"{38.93,6.77}":[{"x":20.68,"y":12.98},{"x":27.48,"y":-13.33},{"x":27.48,"y":-13.33},{"x":39.2,"y":-8.5},{"x":36.91,"y":12.98},{"x":20.68,"y":12.98},{"x":36.91,"y":12.98},{"x":43.25,"y":10.67}],"{385.97,-55.16}":[{"x":400.74,"y":-114.73},{"x":451.02,"y":-108.59},{"x":451.02,"y":-108.59},{"x":478.04,"y":-38.92},{"x":379.45,"y":-55.09},{"x":400.74,"y":-114.73},{"x":478.04,"y":-38.92},{"x":386.13,"y":-38.93}],"{386.13,-38.93}":[{"x":478.04,"y":-38.92},{"x":385.97,"y":-55.16},{"x":478.04,"y":-1.11},{"x":478.04,"y":-38.92},{"x":478.04,"y":-1.11},{"x":344.29,"y":-1.11},{"x":344.29,"y":-1.11},{"x":371.45,"y":-32.67},{"x":371.45,"y":-32.67},{"x":373.63,"y":-38.8}],"{387.74,-143.16}":[{"x":371.89,"y":-126.25},{"x":333.42,"y":-176.89},{"x":400.74,"y":-114.73},{"x":371.89,"y":-126.25},{"x":400.74,"y":-114.73},{"x":451.02,"y":-143.16}],"{39.2,-8.5}":[{"x":38.93,"y":6.77},{"x":27.48,"y":-13.33},{"x":27.48,"y":-13.33},{"x":61.09,"y":-14.87},{"x":54.6,"y":-8.5},{"x":61.09,"y":-14.87}],"{4.06,55.29}":[{"x":5.19,"y":17.14},{"x":6.51,"y":56.28},{"x":-1.73,"y":19.3},{"x":5.19,"y":17.14},{"x":-3.79,"y":55.01},{"x":-1.73,"y":19.3}],"{4.96,-126.8}":[{"x":-1.6,"y":-115.41},{"x":7.49,"y":-122.43},{"x":-19.99,"y":-115.41},{"x":-26.56,"y":-126.8},{"x":-1.6,"y":-115.41},{"x":-19.99,"y":-115.41}],"{400.74,-114.73}":[{"x":371.89,"y":-126.25},{"x":387.74,"y":-143.16},{"x":387.74,"y":-143.16},{"x":451.02,"y":-143.16},{"x":371.89,"y":-114.73},{"x":371.89,"y":-126.25},{"x":451.02,"y":-143.16},{"x":451.02,"y":-108.59},{"x":385.97,"y":-55.16},{"x":451.02,"y":-108.59},{"x":385.97,"y":-55.16},{"x":379.45,"y":-55.09}],"{43.25,10.67}":[{"x":36.91,"y":12.98},{"x":38.93,"y":6.77},{"x":36.91,"y":12.98},{"x":50.56,"y":10.67}],"{451.02,-108.59}":[{"x":400.74,"y":-114.73},{"x":451.02,"y":-143.16},{"x":385.97,"y":-55.16},{"x":400.74,"y":-114.73},{"x":385.97,"y":-55.16},{"x":478.04,"y":-38.92},{"x":478.04,"y":-38.92},{"x":484.64,"y":-110.12}],"{451.02,-143.16}":[{"x":400.74,"y":-114.73},{"x":387.74,"y":-143.16},{"x":400.74,"y":-114.73},{"x":451.02,"y":-108.59}],"{478.04,-1.11}":[{"x":386.13,"y":-38.93},{"x":478.04,"y":-38.92},{"x":386.13,"y":-38.93},{"x":344.29,"y":-1.11}],"{478.04,-38.92}":[{"x":385.97,"y":-55.16},{"x":451.02,"y":-108.59},{"x":451.02,"y":-108.59},{"x":484.64,"y":-110.12},{"x":386.13,"y":-38.93},{"x":385.97,"y":-55.16},{"x":509.53,"y":-40.39},{"x":484.64,"y":-110.12},{"x":478.04,"y":-1.11},{"x":386.13,"y":-38.93}],"{484.64,-110.12}":[{"x":478.04,"y":-38.92},{"x":451.02,"y":-108.59},{"x":509.53,"y":-40.39},{"x":478.04,"y":-38.92}],"{5.19,-1.75}":[{"x":-15.35,"y":-3.62},{"x":16.68,"y":-39.69},{"x":16.68,"y":-39.69},{"x":19.49,"y":-36.9},{"x":-1.48,"y":1.03},{"x":-15.35,"y":-3.62},{"x":27.48,"y":-13.33},{"x":19.49,"y":-36.9},{"x":11.85,"y":1.02},{"x":27.48,"y":-13.33}],"{5.19,17.14}":[{"x":20.68,"y":57.61},{"x":11.85,"y":14.35},{"x":20.68,"y":57.61},{"x":6.51,"y":56.28},{"x":-1.73,"y":19.3},{"x":-1.48,"y":14.35},{"x":4.06,"y":55.29},{"x":6.51,"y":56.28},{"x":4.06,"y":55.29},{"x":-1.73,"y":19.3}],"{50.56,10.67}":[{"x":36.91,"y":12.98},{"x":43.25,"y":10.67},{"x":54.5,"y":56.31},{"x":36.91,"y":12.98},{"x":73.08,"y":18.63},{"x":54.5,"y":56.31},{"x":73.08,"y":18.63},{"x":54.86,"y":6.77}],"{509.53,-40.39}":[{"x":478.04,"y":-38.92},{"x":484.64,"y":-110.12}],"{54.5,56.31}":[{"x":50.56,"y":10.67},{"x":36.91,"y":12.98},{"x":36.91,"y":57.61},{"x":36.91,"y":12.98},{"x":73.08,"y":18.63},{"x":50.56,"y":10.67},{"x":36.91,"y":57.61},{"x":54.5,"y":94.16},{"x":73.08,"y":18.63},{"x":81.19,"y":41.36},{"x":81.19,"y":41.36},{"x":85.99,"y":54.87}],"{54.5,94.16}":[{"x":36.91,"y":57.61},{"x":54.5,"y":56.31},{"x":14.3,"y":72.02},{"x":36.91,"y":57.61},{"x":6.76,"y":81.04},{"x":14.3,"y":72.02},{"x":-47.31,"y":94.16},{"x":-5.82,"y":82.44},{"x":1.98,"y":81.82},{"x":6.76,"y":81.04},{"x":-5.82,"y":82.44},{"x":1.98,"y":81.82},{"x":-4,"y":84}],"{54.6,-8.5}":[{"x":39.2,"y":-8.5},{"x":61.09,"y":-14.87},{"x":54.86,"y":6.77},{"x":61.09,"y":-14.87}],"{54.86,6.77}":[{"x":54.6,"y":-8.5},{"x":61.09,"y":-14.87},{"x":61.09,"y":-14.87},{"x":73.08,"y":18.63},{"x":73.08,"y":18.63},{"x":50.56,"y":10.67}],"{6.19,-184.28}":[{"x":-12.19,"y":-184.28},{"x":12.77,"y":-172.88},{"x":28.53,"y":-200.19},{"x":12.77,"y":-172.88},{"x":28.53,"y":-200.19},{"x":15.36,"y":-200.19}],"{6.19,-216.11}":[{"x":-12.19,"y":-216.11},{"x":12.77,"y":-227.5},{"x":15.36,"y":-200.19},{"x":28.53,"y":-200.19},{"x":12.77,"y":-227.5},{"x":28.53,"y":-200.19}],"{6.51,56.28}":[{"x":20.68,"y":57.61},{"x":5.19,"y":17.14},{"x":4.06,"y":55.29},{"x":5.19,"y":17.14},{"x":16.85,"y":63.69},{"x":20.68,"y":57.61}],"{6.76,81.04}":[{"x":14.3,"y":72.02},{"x":54.5,"y":94.16},{"x":1.98,"y":81.82},{"x":54.5,"y":94.16}],"{6.86,-75.46}":[{"x":7.53,"y":-47.9},{"x":-15.78,"y":-72.19},{"x":-15.78,"y":-72.19},{"x":-1.6,"y":-83.58},{"x":-1.6,"y":-83.58},{"x":7.57,"y":-99.5},{"x":20.73,"y":-99.5},{"x":7.57,"y":-99.5}],"{61.09,-14.87}":[{"x":39.2,"y":-8.5},{"x":27.48,"y":-13.33},{"x":54.6,"y":-8.5},{"x":39.2,"y":-8.5},{"x":54.86,"y":6.77},{"x":54.6,"y":-8.5},{"x":54.86,"y":6.77},{"x":73.08,"y":18.63}],"{63.06,-227.3}":[{"x":78.82,"y":-199.99},{"x":85.4,"y":-211.38},{"x":85.4,"y":-211.38},{"x":76.23,"y":-227.3},{"x":76.23,"y":-227.3},{"x":85.4,"y":-243.21},{"x":78.82,"y":-254.6},{"x":85.4,"y":-243.21}],"{7.49,-122.43}":[{"x":19.04,"y":-102.41},{"x":7.57,"y":-99.5},{"x":7.57,"y":-99.5},{"x":-1.6,"y":-115.41},{"x":166.88,"y":-154.56},{"x":19.04,"y":-102.41},{"x":-1.6,"y":-115.41},{"x":4.96,"y":-126.8},{"x":166.88,"y":-178.65},{"x":166.88,"y":-154.56}],"{7.53,-47.9}":[{"x":-15.2,"y":-47.9},{"x":-22.79,"y":-19.47},{"x":16.68,"y":-39.69},{"x":-22.79,"y":-19.47},{"x":-15.78,"y":-72.19},{"x":-15.2,"y":-47.9},{"x":16.68,"y":-39.69},{"x":15.69,"y":-43.5},{"x":-15.78,"y":-72.19},{"x":6.86,"y":-75.46},{"x":15.69,"y":-43.5},{"x":16.69,"y":-47.3},{"x":16.69,"y":-47.3},{"x":17.29,"y":-47.9}],"{7.57,-99.5}":[{"x":6.86,"y":-75.46},{"x":-1.6,"y":-83.58},{"x":20.73,"y":-99.5},{"x":6.86,"y":-75.46},{"x":20.73,"y":-99.5},{"x":19.04,"y":-102.41},{"x":19.04,"y":-102.41},{"x":7.49,"y":-122.43},{"x":-1.6,"y":-115.41},{"x":7.49,"y":-122.43}],"{73.08,18.63}":[{"x":54.86,"y":6.77},{"x":61.09,"y":-14.87},{"x":54.5,"y":56.31},{"x":50.56,"y":10.67},{"x":50.56,"y":10.67},{"x":54.86,"y":6.77},{"x":54.5,"y":56.31},{"x":81.19,"y":41.36},{"x":81.19,"y":41.36},{"x":128.19,"y":18.63}],"{76.23,-227.3}":[{"x":85.4,"y":-211.38},{"x":63.06,"y":-227.3},{"x":63.06,"y":-227.3},{"x":85.4,"y":-243.21}],"{78.82,-199.99}":[{"x":63.06,"y":-227.3},{"x":85.4,"y":-211.38},{"x":85.4,"y":-211.38},{"x":87.19,"y":-205.1},{"x":87.19,"y":-205.1},{"x":88.18,"y":-201.28},{"x":88.18,"y":-201.28},{"x":89.48,"y":-199.99}],"{78.82,-254.6}":[{"x":63.06,"y":-227.3},{"x":85.4,"y":-243.21},{"x":85.4,"y":-243.21},{"x":110.36,"y":-254.6}],"{81.19,41.36}":[{"x":54.5,"y":56.31},{"x":73.08,"y":18.63},{"x":73.08,"y":18.63},{"x":128.19,"y":18.63},{"x":54.5,"y":56.31},{"x":85.99,"y":54.87},{"x":128.19,"y":18.63},{"x":128.19,"y":41.36}],"{85.4,-211.38}":[{"x":78.82,"y":-199.99},{"x":63.06,"y":-227.3},{"x":63.06,"y":-227.3},{"x":76.23,"y":-227.3},{"x":78.82,"y":-199.99},{"x":87.19,"y":-205.1},{"x":87.19,"y":-205.1},{"x":88.19,"y":-208.92},{"x":88.19,"y":-208.92},{"x":90.68,"y":-211.38}],"{85.4,-243.21}":[{"x":76.23,"y":-227.3},{"x":63.06,"y":-227.3},{"x":63.06,"y":-227.3},{"x":78.82,"y":-254.6},{"x":78.82,"y":-254.6},{"x":110.36,"y":-254.6},{"x":103.78,"y":-243.21},{"x":110.36,"y":-254.6}],"{85.99,54.87}":[{"x":54.5,"y":56.31},{"x":81.19,"y":41.36}],"{87.19,-205.1}":[{"x":78.82,"y":-199.99},{"x":85.4,"y":-211.38},{"x":85.4,"y":-211.38},{"x":88.19,"y":-208.92},{"x":78.82,"y":-199.99},{"x":88.18,"y":-201.28}],"{88.18,-201.28}":[{"x":78.82,"y":-199.99},{"x":87.19,"y":-205.1},{"x":78.82,"y":-199.99},{"x":89.48,"y":-199.99}],"{88.19,-208.92}":[{"x":87.19,"y":-205.1},{"x":85.4,"y":-211.38},{"x":85.4,"y":-211.38},{"x":90.68,"y":-211.38}],"{89.48,-199.99}":[{"x":78.82,"y":-199.99},{"x":88.18,"y":-201.28}],"{90.68,-211.38}":[{"x":88.19,"y":-208.92},{"x":85.4,"y":-211.38}],"{98.91,-211.38}":[{"x":101.39,"y":-208.92},{"x":103.78,"y":-211.38}]}`

func TestFindPathLarge(t *testing.T) {
	srcMap := make(map[string][]Vector2)
	_ = json.Unmarshal([]byte(jsonData), &srcMap)

	vis := make(graph)

	for k, v := range srcMap {
		parts := strings.Split(k, ",")
		x, _ := strconv.ParseFloat(strings.TrimLeft(parts[0], "{"), 64)
		y, _ := strconv.ParseFloat(strings.TrimRight(parts[1], "}"), 64)

		vis[Vector2{X: float32(x), Y: float32(y)}] = v
	}

	start := Vector2{X: 202, Y: -268}
	dest := Vector2{X: -4, Y: 84}

	_ = astar.FindPath(vis, start, dest, hasherVector2, heuristicEvaluation, heuristicEvaluation)
}

// BenchmarkFindPathLarge-16    	  192151	      5843 ns/op	    7624 B/op	      13 allocs/op
func BenchmarkFindPathLarge(b *testing.B) {
	srcMap := make(map[string][]Vector2)
	_ = json.Unmarshal([]byte(jsonData), &srcMap)

	vis := make(graph)

	for k, v := range srcMap {
		parts := strings.Split(k, ",")
		x, _ := strconv.ParseFloat(strings.TrimLeft(parts[0], "{"), 64)
		y, _ := strconv.ParseFloat(strings.TrimRight(parts[1], "}"), 64)

		vis[Vector2{X: float32(x), Y: float32(y)}] = v
	}

	start := Vector2{202, -268}
	dest := Vector2{-4, 84}

	b.ReportAllocs()
	b.ResetTimer()

	for b.Loop() {
		_ = astar.FindPath[Vector2](vis, start, dest, hasherVector2, heuristicEvaluation, heuristicEvaluation)
	}
}

func heuristicEvaluation(a, b Vector2) float32 {
	x := a.X - b.X
	y := a.Y - b.Y

	return x*x + y*y
}

func hasherVector2(v Vector2) int64 {
	qx := quantizeFloat(v.X)
	qy := quantizeFloat(v.Y)

	var hash = hashDefault
	hash = (hash * hashRnd) ^ uint64(qx)
	hash = (hash * hashRnd) ^ uint64(qy)

	return int64(hash)
}

func quantizeFloat(f float32) int64 {
	return int64(f * scaleFactor)
}
